!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/js/plugins/",e(e.s=14)}([function(t,e,n){"use strict";var i=function(){Object.assign(Game_Character.prototype,{total_frame:function(){return 9},maxPattern:function(){return this.total_frame()},pattern:function(){return this._pattern<this.total_frame()?this._pattern:1},updatePattern:function(){!this.hasStepAnime()&&this._stopCount>0?this._pattern=0:this._pattern=(this._pattern+1)%(this.total_frame()+1)},distanceFromCharacter:function(t){return Math.abs(this.deltaXFrom(t.x))+Math.abs(this.deltaYFrom(t.y))},runStraight:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.setMovementSuccess(this.canPass(this._x,this._y,this._direction)),this.isMovementSucceeded()?(this._x+=$gameMap.roundXWithDirection(0,this._direction)*t,this._y+=$gameMap.roundYWithDirection(0,this._direction)*t,this.increaseSteps()):this.checkEventTriggerTouchFront(this._direction)},canJump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._realX,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._realY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._direction,i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],$gameMap.roundXWithDirection(t,n)),a=$gameMap.roundYWithDirection(e,n);return!!this.canPass(i,a,n)},jumpStraight:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._direction;this.setMovementSuccess(this.canJump(this._x,this._y,t)),this.isMovementSucceeded()?(this.setDirection(t),this.skillJump(t)):(this.setDirection(t),this.checkEventTriggerTouchFront(t))},skillJump:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._direction,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!this.isJumping())switch(t){case 8:this.jump(0,-1*e);break;case 2:this.jump(0,1*e);break;case 4:this.jump(-1*e,0);break;case 6:this.jump(1*e,0)}},isSkilling:function(){},skillCharacter:function(){var t=Number($dataMap.events.length),e=Number($gameMap.roundXWithDirection(this._x,this._direction)),n=Number($gameMap.roundYWithDirection(this._y,this._direction));$dataMap.events.push({id:t,name:"EV00"+t,note:"",pages:[{conditions:{actorId:1,actorValid:!1,itemId:1,itemValid:!1,selfSwitchCh:"A",selfSwitchValid:!1,switch1Id:1,switch1Valid:!1,switch2Id:1,switch2Valid:!1,variableId:1,variableValid:!1,variableValue:0},directionFix:!0,image:{tileId:0,characterName:"!Door2",direction:8,pattern:0,characterIndex:0},list:[{code:0,indent:0,parameters:[]}],moveFrequency:10,moveRoute:{list:[{code:0,parameters:[]}],repeat:!0,skippable:!1,wait:!1},moveSpeed:3,moveType:2,priorityType:1,stepAnime:!0,through:!0,trigger:0,walkAnime:!0}],x:e,y:n}),$gameMap._events.push(new Game_Event($gameMap._mapId,t)),SceneManager._scene._spriteset._tilemap.addChild(new Sprite_Character($gameMap._events[$gameMap._events.length-1]))}})};t.exports=i},function(t,e,n){"use strict";var i=function(){Object.assign(Game_Event.prototype,{JumpTypeRandom:function(){switch(Math.randomInt(6)){case 0:case 1:this.JumpRandom();break;case 2:case 3:case 4:this.jumpStraight();break;case 5:this.resetStopCount()}},JumpRandom:function(){var t=2+2*Math.randomInt(4);this.canJump(this.x,this.y,t)&&this.skillJump(t)},updateSelfMovement:function(){if(!this._locked&&this.isNearTheScreen()&&this.checkStop(this.stopCountThreshold()))switch(this._moveType){case 1:this.moveTypeRandom();break;case 2:this.moveTypeTowardPlayer();break;case 3:this.moveTypeCustom();break;case 4:this.moveAwayFromPlayer();break;case 5:this.JumpTypeRandom()}}})};t.exports=i},function(t,e,n){"use strict";var i=function(){Object.assign(Game_Interpreter.prototype,{"本体":function(t){switch(t){case"跳":console.log("开始跳"),this._self()._moveType=5;break;case"远离":console.log("开始远离"),this._self()._moveType=4;break;case"消失":console.log(this._eventId),this._self().erase();break;case"kill":console.log(this._eventId),this._self().clearPageSettings();break;case"归位":this._self().locate(1,1);break;case"标记":$gamePlayer.isMoving()||$gamePlayer.moveTowardCharacter(this._self())}},"图片":function(t,e,n,i){if($gameScreen.showPicture(t,e,0,this._self().screenX(),this._self().screenY(),100,100,255,n),null!=i){var a=SceneManager._scene._spriteset._pictureContainer.children[t-1];SceneManager._scene._spriteset._tilemap.children[0];a._pictureName==e&&(a.z=i,SceneManager._scene._spriteset._tilemap.addChild(a))}},_self:function(){return $gameMap._events[this._eventId]}})};t.exports=i},function(t,e,n){"use strict";var i=function(){Object.assign(Game_Map.prototype,{tileWidth:function(){return 48},tileHeight:function(){return 48}})};t.exports=i},function(t,e,n){"use strict";var i=function(){var t=Game_Player.prototype.update;Object.assign(Game_Player.prototype,{_Event2TouchInit:function(){this._Event2TouchX=-1,this._Event2TouchY=-1},_startEventByTouch:function(t,e,n,i){$gameMap.isEventRunning()||$gameMap.eventsXy(t,e).forEach(function(n){console.log(n),0!=n._trigger||$gamePlayer._x!=t&&$gamePlayer._y!=e?2==n._trigger&&(n.start(),$gamePlayer._Event2TouchInit()):(n.start(),$gamePlayer._Event2TouchInit())})},moveByInput:function(){if(!this.isMoving()&&this.canMove()){var t=this.getInputDirection();t>0?$gameTemp.clearDestination():$gameTemp.isDestinationValid()?(this._Event2TouchX=$gameTemp.destinationX(),this._Event2TouchY=$gameTemp.destinationY(),t=this.findDirectionTo(this._Event2TouchX,this._Event2TouchY)):this._Event2TouchX&&this._Event2TouchY&&(console.log("移动停止"),this._startEventByTouch(this._Event2TouchX,this._Event2TouchY,0,!0)),t>0&&this.executeMove(t)}},update:function(){t.apply(this,arguments)}})};t.exports=i},function(t,e,n){"use strict";var i=function(){console.log("vim on"),Input.keyMapper={9:"tab",13:"ok",16:"shift",17:"control",18:"control",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left_no",38:"up_no",39:"right_no",40:"down_no",45:"escape",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"left",73:"i",74:"down",75:"up",76:"right",80:"p",81:"pageup",82:"r",87:"pagedown",88:"x",89:"y",90:"ok",96:"escape",98:"down",100:"left",102:"right",104:"up",120:"debug"}};t.exports=i},function(t,e,n){"use strict";var i=function(){console.log("一般场景只会在初始化生效"),Scene_Boot.prototype.start=function(){Scene_Base.prototype.start.call(this),SoundManager.preloadImportantSounds(),DataManager.isBattleTest()?(DataManager.setupBattleTest(),SceneManager.goto(Scene_Battle)):DataManager.isEventTest()?(DataManager.setupEventTest(),SceneManager.goto(Scene_Map)):(this.checkPlayerLocation(),DataManager.setupNewGame(),"127.0.0.1:8080"==window.location.host?SceneManager.goto(Scene_Map):SceneManager.goto(Scene_Title),Window_TitleCommand.initCommandPosition()),this.updateDocumentTitle()}};t.exports=i},function(t,e,n){"use strict";var i=function(){var t=Scene_Map.prototype.update,e=Scene_Map.prototype.createAllWindows;Object.assign(Scene_Map.prototype,{disFromCharacter:function(t,e){return Math.abs(this.deltaX(t._realX,e._realX))+Math.abs(this.deltaY(t._realY,e._realY))},createAllWindows:function(){e.call(this),console.log("加载Winbar"),this.addWindow(new Window_Bar($gamePlayer));var t=!0,n=!1,i=void 0;try{for(var a,r=$gameMap.events()[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;this.addWindow(new Window_Bar(o))}}catch(t){n=!0,i=t}finally{try{!t&&r.return&&r.return()}finally{if(n)throw i}}},_startEventByTouch:function(t,e,n,i){$gameMap.isEventRunning()||$gameMap.eventsXy(t,e).forEach(function(n){console.log(n),0!=n._trigger||$gamePlayer._x!=t&&$gamePlayer._y!=e?2==n._trigger&&n.start():n.start()})},processMapTouch:function(){if(TouchInput.isTriggered()||this._touchCount>0)if(TouchInput.isPressed()){if(0===this._touchCount||this._touchCount>=15){var t=$gameMap.canvasToMapX(TouchInput.x),e=$gameMap.canvasToMapY(TouchInput.y);$gameTemp.setDestination(t,e)}this._touchCount++}else this._touchCount=0},update:function(){if(Input.isPressed("space")&&$gamePlayer.jumpStraight(),Input.isPressed("shift")&&($gamePlayer.isMoving()||($gamePlayer.setMoveSpeed(6),$gamePlayer.moveStraight($gamePlayer._direction))),Input.isPressed("control")&&(SceneManager._scene._spriteset._tilemap.children.splice(8,1),$gamePlayer.isMoving()),Input.isPressed("f")){console.log(1);var e=$dataAnimations[3],n=e.animation1Name,i=e.animation2Name,a=e.animation1Hue,r=e.animation2Hue;ImageManager.requestAnimation(n,a),ImageManager.requestAnimation(i,r)}Input.isPressed("h")&&$gamePlayer.skillCharacter(),t.call(this)}})};t.exports=i},function(t,e,n){"use strict";var i=function(){ImageManager.loadMenusMain=function(t){return this.loadBitmap("img/pictures/",t,0,!0)};var t=Scene_Menu.prototype.createBackground,e=Scene_Menu.prototype.update;Object.assign(Scene_Menu.prototype,{createBackground:function(){t.call(this),this._field=new Sprite,this.addChild(this._field)},create:function(){Scene_MenuBase.prototype.create.call(this),this.createCommandWindow(),this.createStatusWindow(),this._commandWindow.x=100,this._commandWindow.y=120,this._commandWindow.contents.fontSize=12,this._commandWindowOrg=[this._commandWindow.x,this._commandWindow.y],this._commandWindow.width=120,this._statusWindow.x=220,this._statusWindow.y=120,this._statusWindow.contents.fontSize=12,this._statusWindowOrg=[this._statusWindow.x,this._statusWindow.y],this._statusWindow.width=500,this._statusWindow.height=350,this.createMenuElement()},createMenuElement:function(){this.createLayout(),this.createLayoutCommand()},createLayout:function(){this._layout=new Sprite(ImageManager.loadMenusMain("layout")),this._field.addChild(this._layout)},createLayoutCommand:function(){this._layoutCommand=new Sprite(ImageManager.loadMenusMain("LayoutCommand")),this._field.addChild(this._layoutCommand)},updateMenuElement:function(){this.updateLayout()},updateLayout:function(){this._layoutCommand.x=100,this._layoutCommand.y=120,this._layoutCommand.opacity=this._commandWindow.contentsOpacity,this._commandWindow.opacity=0,this._statusWindow.opacity=0},update:function(){e.call(this),this._layout&&this.updateMenuElement()}})};t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,n);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(i)},c=function(){var t=function(t){function e(){var t;i(this,e);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(r)))}return r(e,t),o(e,[{key:"create",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"create",this).call(this),this.createBackground(),this.createForeground(),this.createWindowLayer(),this.createCommandWindow()}},{key:"start",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"start",this).call(this),SceneManager.clearStack(),this.centerSprite(this._backSprite1),this.centerSprite(this._backSprite2),this.playTitleMusic(),this.startFadeIn(this.fadeSpeed(),!1)}},{key:"update",value:function(){this.isBusy()||this._commandWindow.open(),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this)}},{key:"isBusy",value:function(){return this._commandWindow.isClosing()||s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"isBusy",this).call(this)}},{key:"terminate",value:function(){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"terminate",this).call(this),SceneManager.snapForBackground()}},{key:"createBackground",value:function(){this._backSprite1=new Sprite(ImageManager.loadTitle1($dataSystem.title1Name)),this._backSprite2=new Sprite(ImageManager.loadTitle2($dataSystem.title2Name)),this.addChild(this._backSprite1),this.addChild(this._backSprite2)}},{key:"createForeground",value:function(){this._gameTitleSprite=new Sprite(new Bitmap(Graphics.width,Graphics.height)),this.addChild(this._gameTitleSprite),$dataSystem.optDrawTitle&&this.drawGameTitle()}}]),e}(Scene_Base);window.Scene_Title_new=t};t.exports=c},function(t,e,n){"use strict";var i=function(){var t=Sprite_Character.prototype.initialize;Object.assign(Sprite_Character.prototype,{total_frame:function(){return 9},patternWidth:function(){return this._tileId>0?$gameMap.tileWidth():(this._isBigCharacter,this.bitmap.width/this.total_frame())},patternHeight:function(){return this._tileId>0?$gameMap.tileHeight():(this._isBigCharacter,this.bitmap.height/4)},characterBlockX:function(){return this._isBigCharacter?0:this._character.characterIndex()%4*this.total_frame()},tilemap_index:function(){var t=this;return this._tilemap_index=SceneManager._scene._spriteset._tilemap.children.findIndex(function(e){return e===t}),this._tilemap_index},tilemap_reborn:function(){SceneManager._scene._spriteset._tilemap.children.splice(this._tilemap_index,0,this)},tilemap_fake:function(){SceneManager._scene._spriteset._tilemap.children.splice(this._tilemap_index,0,new Sprite_Character($gamePlayer))},tilemap_delete:function(){SceneManager._scene._spriteset._tilemap.children.splice(this.tilemap_index(),1)},tilemap_fake_add:function(){SceneManager._scene._spriteset._tilemap.addChild(new Sprite_Character($gamePlayer))},tilemap_add:function(){SceneManager._scene._spriteset._tilemap.addChild(this)},tilemap_remove:function(){SceneManager._scene._spriteset._tilemap.removeChild(this)},initialize:function(e){t.apply(this,arguments);var n=this;e._sprite_character=function(){return n}}})};t.exports=i},function(t,e,n){"use strict";(function(e,n){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){Object.assign(Utils,{isNwjs:function(){return console.log(e),console.log(n.process),"function"==typeof n.require&&"object"===i(n.process)&&!n.process.versions.electron}})};t.exports=a}).call(e,n(15),n(16))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){var t=function(t){function e(t){i(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.screenX()-t._sprite_character()._realFrame.width/2,t.screenY()-1.5*t._sprite_character()._realFrame.height,480,480));n._character=t;var r=n;return t._window_bar=function(){return r},console.log(n),n}return r(e,t),o(e,[{key:"windowLayer_add",value:function(){SceneManager._scene.addWindow(this)}},{key:"windowLayer_remove",value:function(){SceneManager._scene._windowLayer.removeChild(this)}},{key:"show",value:function(){this.windowskin=ImageManager.loadSystem(""),this.contents.fontSize=12,this.contents.outlineWidth=0,this.contents.textColor="red",this.contents.fontFace="Arial";var t=this._character._hp?this._character._hp:this._character._sprite_character()._realFrame.width,e=this._character._max_hp?this._character._max_hp:this._character._sprite_character()._realFrame.width;this.drawText("▇".repeat(t)+"░".repeat(e-t),0,0,48,"left")}},{key:"update",value:function(){this._isWindow=!1,this._margin=0,this._padding=0,this.contents.clear(),this.move(this._character.screenX()-this._character._sprite_character()._realFrame.width/2,this._character.screenY()-1.5*this._character._sprite_character()._realFrame.height,480,480),this.show()}}]),e}(Window_Base);window.Window_Bar=t};t.exports=s},function(t,e,n){"use strict";var i=function(){};t.exports=i},function(t,e,n){"use strict";n(11)(),console.log(Utils.isNwjs),n(5)(),n(0)(),n(4)();var i=n(1);i(),n(3)();var a=n(2);a(),n(13)(),n(12)(),n(9)();var r=n(6);r(),n(8)(),n(10)();var o=n(7);o()},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function r(t){if(p===clearTimeout)return clearTimeout(t);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function o(){m&&d&&(m=!1,d.length?_=d.concat(_):f=-1,_.length&&s())}function s(){if(!m){var t=a(o);m=!0;for(var e=_.length;e;){for(d=_,_=[];++f<e;)d&&d[f].run();f=-1,e=_.length}d=null,m=!1,r(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var h,p,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(t){p=i}}();var d,_=[],m=!1,f=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];_.push(new c(t,e)),1!==_.length||m||a(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}]);