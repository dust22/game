!function(e){function t(a){if(i[a])return i[a].exports;var r=i[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/js/plugins/",t(t.s=11)}([function(e,t,i){"use strict";var a=function(){Object.assign(Game_Character.prototype,{distanceFromCharacter:function(e){return Math.abs(this.deltaXFrom(e.x))+Math.abs(this.deltaYFrom(e.y))},runStraight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.setMovementSuccess(this.canPass(this._x,this._y,this._direction)),this.isMovementSucceeded()?(this._x+=$gameMap.roundXWithDirection(0,this._direction)*e,this._y+=$gameMap.roundYWithDirection(0,this._direction)*e,this.increaseSteps()):this.checkEventTriggerTouchFront(this._direction)},canJump:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._realX,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._realY,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._direction,a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],$gameMap.roundXWithDirection(e,i)),r=$gameMap.roundYWithDirection(t,i);return!!this.canPass(a,r,i)},jumpStraight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._direction;this.setMovementSuccess(this.canJump(this._x,this._y,e)),this.isMovementSucceeded()?(this.setDirection(e),this.skillJump(e)):(this.setDirection(e),this.checkEventTriggerTouchFront(e))},skillJump:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._direction,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!this.isJumping())switch(e){case 8:this.jump(0,-1*t);break;case 2:this.jump(0,1*t);break;case 4:this.jump(-1*t,0);break;case 6:this.jump(1*t,0)}},isSkilling:function(){},skillCharacter:function(){var e=Number($dataMap.events.length),t=Number($gameMap.roundXWithDirection(this._x,this._direction)),i=Number($gameMap.roundYWithDirection(this._y,this._direction));$dataMap.events.push({id:e,name:"EV00"+e,note:"",pages:[{conditions:{actorId:1,actorValid:!1,itemId:1,itemValid:!1,selfSwitchCh:"A",selfSwitchValid:!1,switch1Id:1,switch1Valid:!1,switch2Id:1,switch2Valid:!1,variableId:1,variableValid:!1,variableValue:0},directionFix:!0,image:{tileId:0,characterName:"!Door2",direction:8,pattern:0,characterIndex:0},list:[{code:0,indent:0,parameters:[]}],moveFrequency:10,moveRoute:{list:[{code:0,parameters:[]}],repeat:!0,skippable:!1,wait:!1},moveSpeed:3,moveType:2,priorityType:1,stepAnime:!0,through:!0,trigger:0,walkAnime:!0}],x:t,y:i}),$gameMap._events.push(new Game_Event($gameMap._mapId,e)),SceneManager._scene._spriteset._tilemap.addChild(new Sprite_Character($gameMap._events[$gameMap._events.length-1]))}})};e.exports=a},function(e,t,i){"use strict";var a=function(){Object.assign(Game_Event.prototype,{JumpTypeRandom:function(){switch(Math.randomInt(6)){case 0:case 1:this.JumpRandom();break;case 2:case 3:case 4:this.jumpStraight();break;case 5:this.resetStopCount()}},JumpRandom:function(){var e=2+2*Math.randomInt(4);this.canJump(this.x,this.y,e)&&this.skillJump(e)},updateSelfMovement:function(){if(!this._locked&&this.isNearTheScreen()&&this.checkStop(this.stopCountThreshold()))switch(this._moveType){case 1:this.moveTypeRandom();break;case 2:this.moveTypeTowardPlayer();break;case 3:this.moveTypeCustom();break;case 4:this.moveAwayFromPlayer();break;case 5:this.JumpTypeRandom()}}})};e.exports=a},function(e,t,i){"use strict";var a=function(){Object.assign(Game_Interpreter.prototype,{"本体":function(e){switch(e){case"跳":console.log("开始跳"),this._self()._moveType=5;break;case"远离":console.log("开始远离"),this._self()._moveType=4;break;case"消失":console.log(this._eventId),this._self().erase();break;case"kill":console.log(this._eventId),this._self().clearPageSettings();break;case"归位":this._self().locate(1,1);break;case"标记":$gamePlayer.isMoving()||$gamePlayer.moveTowardCharacter(this._self())}},_self:function(){return $gameMap._events[this._eventId]}})};e.exports=a},function(e,t,i){"use strict";var a=function(){Object.assign(Game_Map.prototype,{tileWidth:function(){return 48},tileHeight:function(){return 48}})};e.exports=a},function(e,t,i){"use strict";var a=function(){var e=Game_Player.prototype.update;Object.assign(Game_Player.prototype,{update:function(){e.apply(this,arguments)}})};e.exports=a},function(e,t,i){"use strict";var a=function(){Input.keyMapper={9:"tab",13:"ok",16:"shift",17:"control",18:"control",27:"escape",32:"space",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",45:"escape",70:"f",72:"h",81:"pageup",87:"pagedown",88:"escape",90:"ok",96:"escape",98:"down",100:"left",102:"right",104:"up",120:"debug"}};e.exports=a},function(e,t,i){"use strict";var a=function(){console.log("一般场景只会在初始化生效"),Scene_Boot.prototype.start=function(){Scene_Base.prototype.start.call(this),SoundManager.preloadImportantSounds(),DataManager.isBattleTest()?(DataManager.setupBattleTest(),SceneManager.goto(Scene_Battle)):DataManager.isEventTest()?(DataManager.setupEventTest(),SceneManager.goto(Scene_Map)):(this.checkPlayerLocation(),DataManager.setupNewGame(),SceneManager.goto(Scene_Map),Window_TitleCommand.initCommandPosition()),this.updateDocumentTitle()}};e.exports=a},function(e,t,i){"use strict";var a=function(){var e=Scene_Map.prototype.update,t=Scene_Map.prototype.createAllWindows;Object.assign(Scene_Map.prototype,{disFromCharacter:function(e,t){return Math.abs(this.deltaX(e._realX,t._realX))+Math.abs(this.deltaY(e._realY,t._realY))},createAllWindows:function(){t.call(this),console.log("加载Winbar"),this.addWindow(new Window_Bar($gamePlayer));var e=!0,i=!1,a=void 0;try{for(var r,n=$gameMap.events()[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var o=r.value;this.addWindow(new Window_Bar(o))}}catch(e){i=!0,a=e}finally{try{!e&&n.return&&n.return()}finally{if(i)throw a}}},update:function(){if(Input.isPressed("space")&&$gamePlayer.jumpStraight(),Input.isPressed("shift")&&($gamePlayer.isMoving()||($gamePlayer.setMoveSpeed(6),$gamePlayer.moveStraight($gamePlayer._direction))),Input.isPressed("control")&&(SceneManager._scene._spriteset._tilemap.children.splice(8,1),$gamePlayer.isMoving()),Input.isPressed("f")){console.log(1);var t=$dataAnimations[3],i=t.animation1Name,a=t.animation2Name,r=t.animation1Hue,n=t.animation2Hue;ImageManager.requestAnimation(i,r),ImageManager.requestAnimation(a,n)}Input.isPressed("h")&&$gamePlayer.skillCharacter(),e.call(this)}})};e.exports=a},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=function e(t,i,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var n=Object.getPrototypeOf(t);return null===n?void 0:e(n,i,a)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(a)},c=function(){var e=function(e){function t(){var e;a(this,t);for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)))}return n(t,e),o(t,[{key:"create",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",this).call(this),this.createBackground(),this.createForeground(),this.createWindowLayer(),this.createCommandWindow()}},{key:"start",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),SceneManager.clearStack(),this.centerSprite(this._backSprite1),this.centerSprite(this._backSprite2),this.playTitleMusic(),this.startFadeIn(this.fadeSpeed(),!1)}},{key:"update",value:function(){this.isBusy()||this._commandWindow.open(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this)}},{key:"isBusy",value:function(){return this._commandWindow.isClosing()||s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"isBusy",this).call(this)}},{key:"terminate",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"terminate",this).call(this),SceneManager.snapForBackground()}},{key:"createBackground",value:function(){this._backSprite1=new Sprite(ImageManager.loadTitle1($dataSystem.title1Name)),this._backSprite2=new Sprite(ImageManager.loadTitle2($dataSystem.title2Name)),this.addChild(this._backSprite1),this.addChild(this._backSprite2)}},{key:"createForeground",value:function(){this._gameTitleSprite=new Sprite(new Bitmap(Graphics.width,Graphics.height)),this.addChild(this._gameTitleSprite),$dataSystem.optDrawTitle&&this.drawGameTitle()}}]),t}(Scene_Base);window.Scene_Title_new=e};e.exports=c},function(e,t,i){"use strict";var a=function(){var e=Sprite_Character.prototype.initialize;Object.assign(Sprite_Character.prototype,{tilemap_index:function(){var e=this;return this._tilemap_index=SceneManager._scene._spriteset._tilemap.children.findIndex(function(t){return t===e}),this._tilemap_index},tilemap_reborn:function(){SceneManager._scene._spriteset._tilemap.children.splice(this._tilemap_index,0,this)},tilemap_fake:function(){SceneManager._scene._spriteset._tilemap.children.splice(this._tilemap_index,0,new Sprite_Character($gamePlayer))},tilemap_delete:function(){SceneManager._scene._spriteset._tilemap.children.splice(this.tilemap_index(),1)},tilemap_fake_add:function(){SceneManager._scene._spriteset._tilemap.addChild(new Sprite_Character($gamePlayer))},tilemap_add:function(){SceneManager._scene._spriteset._tilemap.addChild(this)},tilemap_remove:function(){SceneManager._scene._spriteset._tilemap.removeChild(this)},initialize:function(t){e.apply(this,arguments),t._sprite_character=this}})};e.exports=a},function(e,t,i){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),s=function(){var e=function(e){function t(e){a(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.screenX()-e._sprite_character._realFrame.width/2,e.screenY()-1.5*e._sprite_character._realFrame.height,480,480));return i._character=e,e._window_bar=i,console.log(i),i}return n(t,e),o(t,[{key:"windowLayer_add",value:function(){SceneManager._scene.addWindow(this)}},{key:"windowLayer_remove",value:function(){SceneManager._scene._windowLayer.removeChild(this)}},{key:"show",value:function(){this.windowskin=ImageManager.loadSystem(""),this.contents.fontSize=12,this.contents.outlineWidth=0,this.contents.textColor="red",this.contents.fontFace="Arial";var e=this._character._hp?this._character._hp:this._character._sprite_character._realFrame.width,t=this._character._max_hp?this._character._max_hp:this._character._sprite_character._realFrame.width;this.drawText("▇".repeat(e)+"░".repeat(t-e),0,0,48,"left")}},{key:"update",value:function(){this._isWindow=!1,this._margin=0,this._padding=0,this.contents.clear(),this.move(this._character.screenX()-this._character._sprite_character._realFrame.width/2,this._character.screenY()-1.5*this._character._sprite_character._realFrame.height,480,480),this.show()}}]),t}(Window_Base);window.Window_Bar=e};e.exports=s},function(e,t,i){"use strict";i(5)(),i(0)(),i(4)();var a=i(1);a(),i(3)();var r=i(2);r(),i(10)(),i(8)();var n=i(6);n(),i(9)();var o=i(7);o()}]);